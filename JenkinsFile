#!groovy


stage 'setJava'
node {

     env.JAVA_HOME = "C:\\Program Files\\Java\\jdk1.8.0_66"
     echo env.JAVA_HOME

     env.JAVA_HOME="${tool 'Java Tool'}"
     echo env.JAVA_HOME

    
}


stage 'Checkout'

node {
   
// Mark the code checkout 'stage'....
   
// Checkout code from repository
   
git 'https://github.com/exorcist007/JenkinsWorkflowBuild.git'

stage 'Build'
bat 'gradle build --info'

}
stage 'Checkout2'

node{
    
git 'https://github.com/exorcist007/TDF-IDF-CascadingDateFormatConversion.git'
stage 'Build'
bat 'gradle build --info'

}
stage 'QA'
node{
//this is a custom task that gets called irrespective of the repositories being called
bat 'gradle sayHello'
}
stage 'jar'
node{
//extra batch command called: may be ignored
bat 'gradle clean jar --info'
}
stage name: 'Production', concurrency: 1
node {


 echo 'Production server looks to be alive'
 echo "Deployed to production"
}





